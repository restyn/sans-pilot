<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data>
    <template id="registration_attendee_details_address" inherit_id="website_event.registration_attendee_details" name="Registration Attendee Details with Address">
    <data>
        <!-- Attendee specific questions -->
        <xpath expr="//div[hasclass('modal-content')]" position="replace">
                <div class="modal-content">
                    <div class="modal-header align-items-center">
                        <h4 class="modal-title">Attendees</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span>&amp;times;</span></button>
                    </div>
            <div class="modal-body">
                        <div class="container">
                            <t t-set="counter_type" t-value="1"/>
                            <t t-set="counter" t-value="0"/>
                            <t t-foreach="tickets" t-as="ticket">
                                <t t-if="'Online' in ticket['name']">
                                    <h4 class="o_page_header mt16">
                                        <strong>
                                            Ticket Type #<t t-raw="counter_type"/>:
                                            <t t-esc="ticket['name']"/>
                                            <t t-if="ticket['price'] == 0">(Free)</t>
                                        </strong>
                                    </h4>
                                    <t t-foreach="range(1, ticket['quantity'] + 1)" t-as="att_counter"
                                       name="attendee_loop">
                                        <t t-set="counter" t-value="counter + 1"/>

                                        <div class="modal-body bg-light border-bottom">
                                            <h5 class="mt-1 pb-2 border-bottom">Ticket #
                                                <span t-esc="counter"/>
                                                <small class="text-muted">-
                                                    <span t-esc="ticket['name']"/>
                                                </small>
                                            </h5>
                                            <div class="row">
                                                <div class="col-lg my-2">
                                                    <label>Address</label>
                                                    <input class='form-control' type='text'
                                                           t-attf-name="#{counter}-street"/>
                                                </div>
                                                <div class="col-lg my-2">
                                                    <label>City</label>
                                                    <input class='form-control' type='text'
                                                           t-attf-name="#{counter}-city"/>
                                                </div>
                                                <div class="col-lg my-2">
                                                    <label>State</label>
                                                    <input class='form-control' type='text'
                                                           t-attf-name="#{counter}-state_id"/>
                                                </div>
                                                <div class="col-lg my-2">
                                                    <label>Zip</label>
                                                    <input class='form-control' type='text'
                                                           t-attf-name="#{counter}-zip"/>
                                                </div>
                                                <t t-set="attendee_placeholder">Attendee #%s</t>
                                                <input type="hidden" t-attf-name="#{counter}-name"
                                                       t-att-value="attendee_placeholder %counter"/>
                                                <input class="d-none" type="text" t-attf-name="#{counter}-ticket_id"
                                                       t-attf-value="#{ticket['id']}"/>
                                            </div>
                                        </div>
                                    </t>
                                </t>
                                <t t-else="">
                                    <h4 class="o_page_header mt16">
                                        <strong>
                                            Ticket Type #<t t-raw="counter_type"/>:
                                            <t t-esc="ticket['name']"/>
                                        </strong>
                                    </h4>
                                    <div class="modal-body bg-light border-bottom">
                                            <h5 class="mt-1 pb-2 border-bottom">Tickets:
                                                <span t-esc="ticket['quantity']"/>
                                            </h5>
                                    </div>
                                    <t t-foreach="range(1, ticket['quantity'] + 1)" t-as="att_counter"
                                       name="attendee_loop">
                                        <t t-set="counter" t-value="counter + 1"/>
                                        <t t-set="attendee_placeholder">Attendee #%s</t>
                                        <input type="hidden" t-attf-name="#{counter}-name"
                                               t-att-value="attendee_placeholder %counter"/>
                                        <input class="d-none" type="text" t-attf-name="#{counter}-ticket_id"
                                               t-attf-value="#{ticket['id']}"/>
                                    </t>
                                </t>
                                <t t-set="counter_type" t-value="counter_type + 1"/>
                            </t>
                        </div>
                    </div>
                    <div class="modal-footer border-0 justify-content-between">
                        <button type="button" class="btn btn-secondary js_goto_event" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Continue</button>
                    </div>
                </div>
        </xpath>
    </data>
    </template>
    <template id="registration_template" inherit_id="website_event_sale.registration_template">
        <data>
            <xpath expr="//t[@t-set='price']" position="replace">
            </xpath>
        </data>
    </template>
    <template id="registration_complete" inherit_id="website_event.registration_complete">
        <data>
            <xpath expr="//table" position="replace">
                <h3><span t-esc="len(attendees)" /> Registered</h3>
            </xpath>
        </data>
    </template>

        <record id="view_event_registration_ticket_tree" model="ir.ui.view">
            <field name="name">event.registration.tree.inherit</field>
            <field name="model">event.registration</field>
            <field name="inherit_id" ref="event.view_event_registration_tree" />
            <field name="arch" type="xml"><data>
                <xpath expr="//field[@name='state']" position="after">
                    <field name="street"/>
                    <field name="city"/>
                    <field name="state_id"/>
                    <field name="zip"/>
                </xpath>
            </data>
            </field>
        </record>
</data>
</odoo>